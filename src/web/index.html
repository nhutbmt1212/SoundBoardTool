<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dalit</title>
    <link rel="icon" type="image/png" sizes="32x32" href="assets/logo_transparent.png">
    <link rel="icon" type="image/x-icon" href="assets/icon.ico">
    <link rel="shortcut icon" href="assets/icon.ico">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CSS Modules -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/modes.css">
    <link rel="stylesheet" href="css/features.css">
    <link rel="stylesheet" href="css/tabs.css">
    <link rel="stylesheet" href="css/effects.css">
    <link rel="stylesheet" href="css/backup.css">
    <link rel="stylesheet" href="css/backup_premium.css">
</head>

<body>
    <div class="app">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Header with gradient -->
            <div class="header-gradient"></div>

            <!-- Title ---->
            <div class="title-section">
                <h1>
                    <img src="assets/logo_transparent.png" alt="Dalit" style="height: 48px; margin-right: 12px;">
                    Dalit
                </h1>

                <!-- Settings Button -->
                <button class="btn-settings" onclick="showBackupSettings()" title="Backup & Settings">
                    <span class="settings-icon" id="settings-icon"></span>
                </button>
            </div>

            <!-- Tabs -->
            <div class="tabs-container">
                <button class="tab-btn active" onclick="switchTab('sounds')" id="tab-sounds">
                    <span class="tab-icon" id="icon-tab-sounds"></span>
                    <span class="tab-text">Sounds</span>
                </button>
                <button class="tab-btn" onclick="switchTab('youtube')" id="tab-youtube">
                    <span class="tab-icon" id="icon-tab-youtube"></span>
                    <span class="tab-text">YouTube</span>
                </button>
                <button class="tab-btn" onclick="switchTab('tiktok')" id="tab-tiktok">
                    <span class="tab-icon" id="icon-tab-tiktok"></span>
                    <span class="tab-text">TikTok</span>
                </button>
                <button class="tab-btn" onclick="switchTab('tts')" id="tab-tts">
                    <span class="tab-icon" id="icon-tab-tts"></span>
                    <span class="tab-text">TTS</span>
                </button>
            </div>

            <!-- Sounds Tab Content -->
            <div class="tab-content active" id="content-sounds">
                <div class="tab-header">
                    <button class="btn-add" onclick="addSound()">
                        <span id="icon-btn-add"></span> Add Sound
                    </button>
                    <button class="btn-refresh" onclick="refreshSounds()">
                        <span id="icon-btn-refresh"></span> Refresh
                    </button>
                </div>
                <div class="sounds-grid" id="sounds-grid">
                    <!-- Sound cards will be added here -->
                </div>
            </div>

            <!-- YouTube Tab Content -->
            <div class="tab-content" id="content-youtube">
                <div class="tab-header">
                    <button class="btn-add" onclick="showAddYoutubeDialog()">
                        <span id="icon-btn-add-yt"></span> Add from YouTube
                    </button>
                    <button class="btn-refresh" onclick="refreshYoutubeItems()">
                        <span id="icon-btn-refresh-yt"></span> Refresh
                    </button>
                </div>
                <div id="youtube-info" class="youtube-info" style="display: none;"></div>
                <div class="youtube-grid" id="youtube-grid">
                    <!-- YouTube items will be added here -->
                </div>
            </div>

            <!-- TikTok Tab Content -->
            <div class="tab-content" id="content-tiktok">
                <div class="tab-header">
                    <button class="btn-add" onclick="showAddTikTokDialog()">
                        <span id="icon-btn-add-tt"></span> Add from TikTok
                    </button>
                    <button class="btn-refresh" onclick="refreshTikTokItems()">
                        <span id="icon-btn-refresh-tt"></span> Refresh
                    </button>
                </div>
                <div id="tiktok-info" class="tiktok-info" style="display: none;"></div>
                <div class="tiktok-grid" id="tiktok-grid">
                    <!-- TikTok items will be added here -->
                </div>
            </div>

            <!-- TTS Tab Content -->
            <div class="tab-content" id="content-tts">
                <div class="tts-container">
                    <div class="tts-input-section">
                        <label for="tts-text" class="tts-label">Nhập văn bản</label>
                        <textarea id="tts-text" class="tts-textarea"
                            placeholder="Nhập văn bản cần chuyển thành giọng nói..." rows="5"></textarea>
                    </div>

                    <div class="tts-controls">
                        <div class="tts-voice-select">
                            <label for="tts-voice">Giọng đọc</label>
                            <select id="tts-voice" class="tts-select">
                                <option value="vi-VN-HoaiMyNeural">Hoài My (Nữ)</option>
                                <option value="vi-VN-NamMinhNeural">Nam Minh (Nam)</option>
                            </select>
                        </div>

                        <div class="tts-volume-control">
                            <label for="tts-volume">Âm lượng: <span id="tts-volume-value">100%</span></label>
                            <input type="range" id="tts-volume" class="tts-slider" min="0" max="100" value="100"
                                oninput="TTSEvents.onVolumeChange(this.value)">
                        </div>
                    </div>

                    <div class="tts-actions">
                        <button class="btn-primary tts-generate-btn" id="tts-generate-btn"
                            onclick="TTSEvents.generateAndPlay()">
                            <span id="icon-tts-play"></span>
                            Phát giọng nói
                        </button>
                        <button class="btn-secondary tts-stop-btn" onclick="TTSEvents.stop()">
                            <span id="icon-tts-stop"></span>
                            Dừng
                        </button>
                    </div>

                    <div id="tts-status" class="tts-status" style="display: none;"></div>
                </div>
            </div>

            <!-- Unified Now Playing Bar -->
            <div id="now-playing-bar" class="now-playing-bar" onclick="EventHandlers.onNowPlayingClick()">
                <div class="now-playing-content">
                    <div class="now-playing-icon" id="now-playing-icon">
                        <!-- Dynamic Icon -->
                    </div>
                    <div class="now-playing-info">
                        <div class="now-playing-label">Now Playing</div>
                        <div class="now-playing-title" id="now-playing-title">Select a sound...</div>
                    </div>
                    <div class="now-playing-controls">
                        <!-- Play/Pause status icon -->
                        <div id="now-playing-status-icon"></div>
                    </div>
                </div>
                <div class="now-playing-progress-bar">
                    <div class="now-playing-progress-fill" id="now-playing-progress"></div>
                </div>
            </div>

            <!-- Bottom Controls -->
            <div class="bottom-controls">
                <!-- Mic Passthrough -->
                <div class="mic-control">
                    <button class="btn-mic" id="btn-mic" onclick="toggleMic()" title="Mic Passthrough">
                        <span class="mic-icon" id="mic-icon"></span>
                        <span class="mic-text" id="mic-text">Mic OFF</span>
                    </button>
                    <input type="range" class="mic-volume" id="mic-volume" min="0" max="300" value="100"
                        oninput="onMicVolumeChange(this.value)" title="Mic Volume">
                </div>

                <button class="btn-stop-all" onclick="stopAll()" title="Stop All" id="btn-stop-all">
                    <span class="stop-icon" id="stop-icon"></span>
                    <span class="stop-text">Stop All</span>
                </button>
                <div class="stop-keybind" id="stop-keybind" onclick="startStopKeybindRecord()"
                    title="Click to set keybind">
                    <span id="stop-keybind-text">Add keybind</span>
                </div>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="right-panel" id="right-panel">
            <div class="panel-placeholder">
                <span id="placeholder-icon"></span>
                <p>Click a sound to edit</p>
            </div>
        </div>
        <!-- Modal Container -->
        <div id="modal-overlay" class="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <h3 id="modal-title">Modal Title</h3>
                    <button class="modal-close" onclick="UI.closeModal()">&times;</button>
                </div>
                <div class="modal-body" id="modal-body">
                    <!-- Dynamic content -->
                </div>
                <div class="modal-footer" id="modal-footer">
                    <button class="btn-secondary" onclick="UI.closeModal()">Cancel</button>
                    <button class="btn-primary" id="modal-confirm-btn">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JS Modules -->
    <script type="text/javascript" src="/eel.js"></script>
    <script src="icons.js"></script>

    <!-- Core modules -->
    <script src="js/core/utils.js"></script>
    <script src="js/core/api.js"></script>
    <script src="js/core/backup-api.js"></script>
    <script src="js/core/state.js"></script>
    <script src="js/core/notifications.js"></script>
    <script src="js/core/progress.js"></script>

    <!-- UI modules -->
    <script src="js/ui/helpers.js"></script>
    <script src="js/ui/effects-helpers.js"></script>
    <script src="js/ui/card-renderer.js"></script>
    <script src="js/ui/grid-renderer.js"></script>
    <script src="js/ui/panel-renderer.js"></script>
    <script src="js/ui/ui.js"></script>

    <!-- Feature modules -->
    <script src="js/features/waveform.js"></script>
    <script src="js/features/youtube-waveform.js"></script>
    <script src="js/features/tiktok-waveform.js"></script>

    <!-- Event modules -->
    <script src="js/events/sound.js"></script>
    <script src="js/events/youtube.js"></script>
    <script src="js/events/tiktok.js"></script>
    <script src="js/events/tts.js"></script>
    <script src="js/events/keybind.js"></script>
    <script src="js/events/effects-events.js"></script>
    <script src="js/events/backup.js"></script>
    <script src="js/events/ui.js"></script>
    <script src="js/events/events.js"></script>

    <!-- App initialization -->
    <script src="js/core/app.js"></script>
</body>

</html>